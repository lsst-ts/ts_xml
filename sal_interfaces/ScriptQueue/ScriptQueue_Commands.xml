<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="http://lsst-sal.tuc.noao.edu/schema/SALCommandSet.xsl"?>
<SALCommandSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://lsst-sal.tuc.noao.edu/schema/SALCommandSet.xsd">
    <Enumeration>Location_First,Location_Last,Location_Before,Location_After</Enumeration>

<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_showAvailableScripts</EFDB_Topic>
    <Alias>showAvailableScripts</Alias>
    <Description>List the scripts that are available.</Description>
    <item>
        <EFDB_Name>ignored</EFDB_Name>
        <Description>This field is ignored.</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_showSchema</EFDB_Topic>
    <Alias>showSchema</Alias>
    <Description>Show the configuration schema for a given script.</Description>
    <item>
        <EFDB_Name>isStandard</EFDB_Name>
        <Description>Is this a standard script (True) or an external script (False)?</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>path</EFDB_Name>
        <Description>Path to script, relative to the root directory for standard or external scripts.</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_showQueue</EFDB_Topic>
    <Alias>showQueue</Alias>
    <Description>Output the queue event.</Description>
    <item>
        <EFDB_Name>ignored</EFDB_Name>
        <Description>This field is ignored.</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_showScript</EFDB_Topic>
    <Alias>showScript</Alias>
    <Description>Output script event for a specified script.</Description>
    <item>
        <EFDB_Name>salIndex</EFDB_Name>
        <Description>SAL index of Script for which you want information.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_pause</EFDB_Topic>
    <Alias>pause</Alias>
    <Description>Pause the queue. If a script is executing it will continue, but once that script is done no new script will be run.</Description>
    <item>
        <EFDB_Name>ignored</EFDB_Name>
        <Description>This field is ignored.</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_resume</EFDB_Topic>
    <Alias>resume</Alias>
    <Description>Resume normal operation (unpause the queue).</Description>
    <item>
        <EFDB_Name>ignored</EFDB_Name>
        <Description>This field is ignored.</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_add</EFDB_Topic>
    <Alias>add</Alias>
    <Description>Add a script to the queue and configure it.</Description>
    <item>
        <EFDB_Name>isStandard</EFDB_Name>
        <Description>Is this a standard script (True) or an external script (False)?</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>path</EFDB_Name>
        <Description>Path to script, relative to the root directory for standard or external scripts.</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>config</EFDB_Name>
        <Description>Configuration as yaml text that is parsed to make a keyword argument dict for the script's configure method.</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>descr</EFDB_Name>
        <Description>Short description of why you are running this script.</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>location</EFDB_Name>
        <Description>Location in the queue; a Location enum.</Description>
        <IDL_Type>byte</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>locationSalIndex</EFDB_Name>
        <Description>Index of Script SAL component referred to by `location`; ignored unless `location` is `Before` or `After`.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>logLevel</EFDB_Name>
        <Description>Logging level for the script, as a Python logging level: error=40, warning=30, info=20, debug=10, use default=0.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>pauseCheckpoint</EFDB_Name>
        <Description>Checkpoint(s) at which to pause the script, as a regular expression. No checkpoints if blank; all checkpoints if ".*".</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
        <EFDB_Name>stopCheckpoint</EFDB_Name>
        <Description>Checkpoint(s) at which to stop the script, as a regular expression. No checkpoints if blank; all checkpoints if ".*".</Description>
        <IDL_Type>string</IDL_Type>
        <IDL_Size>1</IDL_Size>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_move</EFDB_Topic>
    <Alias>move</Alias>
    <Description>Move a script elsewhere in the queue. This will fail if the script is already running.</Description>
    <item>
      <EFDB_Name>salIndex</EFDB_Name>
        <Description>Index of Script SAL component to move.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>location</EFDB_Name>
        <Description>Location in the queue; a Location enum.</Description>
        <IDL_Type>byte</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>locationSalIndex</EFDB_Name>
        <Description>Index of Script SAL component referred to by `location`; ignored unless `location` is `Before` or `After`.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_requeue</EFDB_Topic>
    <Alias>requeue</Alias>
    <Description>Put a script back on the queue that has already run, is running or is queued.</Description>
    <item>
      <EFDB_Name>salIndex</EFDB_Name>
        <Description>Index of Script SAL component to requeue.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>location</EFDB_Name>
        <Description>Location in the queue; a Location enum.</Description>
        <IDL_Type>byte</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>locationSalIndex</EFDB_Name>
        <Description>Index of Script SAL component referred to by the location field; ignored unless the location is Before or After.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>
<SALCommand>
    <Subsystem>ScriptQueue</Subsystem>
    <EFDB_Topic>ScriptQueue_command_stopScripts</EFDB_Topic>
    <Alias>stopScripts</Alias>
    <Description>Stop one or more queued scripts and/or the current script.</Description>
    <item>
        <EFDB_Name>length</EFDB_Name>
        <Description>Number of valid entries in salIndices.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
    <item>
      <EFDB_Name>salIndices</EFDB_Name>
        <Description>Indices of Script SAL component to stop, 0 terminated.</Description>
        <IDL_Type>int</IDL_Type>
        <Units>unitless</Units>
        <Count>400</Count>
    </item>
    <item>
      <EFDB_Name>terminate</EFDB_Name>
        <Description>If True, terminate the current script without giving it a chance to clean up. If False, try sending a stop command first, and only terminate if if that doesn't work in a timely fashion.</Description>
        <IDL_Type>boolean</IDL_Type>
        <Units>unitless</Units>
        <Count>1</Count>
    </item>
</SALCommand>

</SALCommandSet>
